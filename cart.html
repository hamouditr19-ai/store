<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ | Ø±ÙŠÙ… Ø³ØªÙˆØ±ÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body { background: #f5f5f5; padding: 20px; }
        .cart-container {
            max-width: 600px;
            margin: 20px auto;
            background: white;
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            padding: 25px;
        }
        h1 { color: #8e24aa; text-align: center; margin-bottom: 30px; }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        .cart-item img {
            width: 70px;
            height: 70px;
            object-fit: contain;
            background: #fafafa;
            border-radius: 15px;
            padding: 10px;
        }
        .item-details { flex: 1; }
        .item-name { font-weight: 700; margin-bottom: 5px; }
        .item-price { color: #8e24aa; font-weight: 600; }

        .game-id-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 1rem;
        }

        .total-section {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .total-amount { font-size: 2rem; font-weight: 900; color: #8e24aa; }

        .btn-checkout {
            background: linear-gradient(135deg, #8e24aa, #c2185b);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            margin: 15px 0;
        }

        .back-link {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: #8e24aa;
            text-decoration: none;
            font-weight: 600;
        }

        .empty-cart {
            text-align: center;
            padding: 40px;
            color: #999;
        }
    </style>
</head>
<body>

    <div class="cart-container">
        <h1>ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡</h1>

        <div id="cartItems">
            <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø© Ø³ØªØªØ­Ù…Ù„ Ù‡Ù†Ø§ -->
        </div>

        <div id="gameIdSection" style="display: none;">
            <input type="text" id="gameIdInput" class="game-id-input" placeholder="Ø£Ø¯Ø®Ù„ ID Ø§Ù„Ù„Ø¹Ø¨Ø© Ø£Ùˆ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬">
        </div>

        <div class="total-section">
            <div style="margin-bottom: 10px;">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ</div>
            <div class="total-amount" id="cartTotal">0</div>
            <div>Ø¯ÙˆÙ„Ø§Ø± Ø³ÙˆØ±ÙŠ</div>
        </div>

        <button class="btn-checkout" onclick="checkout()">
            <i class="fas fa-check-circle"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´Ø±Ø§Ø¡
        </button>

        <a href="index.html" class="back-link">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚</a>
    </div>

    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let balance = parseInt(localStorage.getItem('walletBalance')) || 500;

        function displayCart() {
            const container = document.getElementById('cartItems');
            const gameIdSection = document.getElementById('gameIdSection');
            const totalEl = document.getElementById('cartTotal');
            
            if(cart.length === 0) {
                container.innerHTML = '<div class="empty-cart"><i class="fas fa-shopping-cart fa-3x"></i><p>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p></div>';
                gameIdSection.style.display = 'none';
                totalEl.innerText = '0';
                return;
            }

            let html = '';
            let total = 0;
            cart.forEach(item => {
                total += item.price;
                html += `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}">
                        <div class="item-details">
                            <div class="item-name">${item.name}</div>
                            <div class="item-price">ğŸ’° ${item.price} Ø¯ÙˆÙ„Ø§Ø± Ø³ÙˆØ±ÙŠ</div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
            totalEl.innerText = total;
            gameIdSection.style.display = 'block';
        }

        window.checkout = function() {
            if(cart.length === 0) {
                alert('âŒ Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©');
                return;
            }

            const total = cart.reduce((sum, item) => sum + item.price, 0);
            if(total > balance) {
                alert('âŒ Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø´Ø­Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©');
                window.location.href = 'wallet.html';
                return;
            }

            const gameId = document.getElementById('gameIdInput').value;
            if(!gameId) {
                alert('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ID Ø§Ù„Ù„Ø¹Ø¨Ø©');
                return;
            }

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø¨ÙˆØª
            const orderDetails = {
                items: cart,
                total: total,
                gameId: gameId,
                userId: 'user_' + Date.now()
            };
            console.log('ğŸ“¦ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:', orderDetails);
            
            // Ø®ØµÙ… Ø§Ù„Ø±ØµÙŠØ¯
            balance -= total;
            localStorage.setItem('walletBalance', balance.toString());

            alert(`âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹`);
            
            // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
            localStorage.removeItem('cart');
            window.location.href = 'index.html';
        };

        displayCart();
    </script>
</body>
</html>
