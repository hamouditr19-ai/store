<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reem Store</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0f172a;
    color:white;
}
header{
    padding:15px;
    text-align:center;
    background:#1e293b;
    font-size:20px;
}
.products{
    padding:15px;
}
.prod-item{
    background:#1e293b;
    padding:15px;
    margin-bottom:10px;
    border-radius:10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
button{
    border:none;
    padding:8px 12px;
    border-radius:6px;
    cursor:pointer;
}
.buy{background:#22c55e;color:white;}
.delete{background:red;color:white;}
.bottom-bar{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    background:#1e293b;
    display:flex;
    justify-content:space-around;
    padding:10px;
}
.modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    display:none;
    justify-content:center;
    align-items:center;
}
.modal.active{display:flex;}
.sheet{
    background:#1e293b;
    padding:20px;
    width:90%;
    max-width:400px;
    border-radius:15px;
}
input{
    width:100%;
    padding:8px;
    margin:5px 0;
    border-radius:5px;
    border:none;
}
</style>
</head>
<body>

<header>Reem Store ğŸš€</header>

<div class="products" id="productList"></div>

<div class="bottom-bar">
<button onclick="openCart()">ğŸ›’ Ø§Ù„Ø³Ù„Ø©</button>
<button onclick="openWallet()">ğŸ’° Ø§Ù„Ù…Ø­ÙØ¸Ø©</button>
<button onclick="openAdmin()">âš™ï¸ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
</div>

<!-- CART -->
<div id="cartModal" class="modal" onclick="closeModals()">
<div class="sheet" onclick="event.stopPropagation()">
<h3>Ø§Ù„Ø³Ù„Ø© ğŸ›’</h3>
<div id="cartItems"></div>
<h4 id="cartTotal"></h4>
<button onclick="sendOrder()" class="buy">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</div>
</div>

<!-- WALLET -->
<div id="walletModal" class="modal" onclick="closeModals()">
<div class="sheet" onclick="event.stopPropagation()">
<h3>Ø§Ù„Ù…Ø­ÙØ¸Ø© ğŸ’°</h3>
<h4 id="walletBalance"></h4>
<input id="chargeAmount" placeholder="Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø­Ù†">
<button onclick="chargeWallet()" class="buy">Ø´Ø­Ù†</button>
</div>
</div>

<!-- ADMIN -->
<div id="adminModal" class="modal" onclick="closeModals()">
<div class="sheet" onclick="event.stopPropagation()">
<h3>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† âš™ï¸</h3>
<input id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<input id="prodName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="prodPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<button onclick="addProduct()" class="buy">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
</div>
</div>

<script>

const TELEGRAM_TOKEN = "PUT_YOUR_TOKEN";
const CHAT_ID = "PUT_YOUR_CHAT_ID";

let database = JSON.parse(localStorage.getItem("store_db")) || [];
let cart = JSON.parse(localStorage.getItem("store_cart")) || [];
let wallet = parseFloat(localStorage.getItem("store_wallet")) || 0;

function saveDB(){localStorage.setItem("store_db",JSON.stringify(database));}
function saveCart(){localStorage.setItem("store_cart",JSON.stringify(cart));}
function saveWallet(){localStorage.setItem("store_wallet",wallet);}

function renderProducts(){
    const list=document.getElementById("productList");
    if(database.length===0){
        list.innerHTML="<p style='opacity:0.5'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>";
        return;
    }
    list.innerHTML=database.map((p,i)=>`
    <div class="prod-item">
        <span>${p.name} - ${p.price}</span>
        <div>
            <button class="buy" onclick="addToCart(${i})">Ø´Ø±Ø§Ø¡</button>
            <button class="delete" onclick="deleteProduct(${i})">X</button>
        </div>
    </div>
    `).join("");
}

function addToCart(i){
    cart.push(database[i]);
    saveCart();
    alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©");
}

function openCart(){
    const modal=document.getElementById("cartModal");
    const items=document.getElementById("cartItems");
    const totalBox=document.getElementById("cartTotal");
    if(cart.length===0){
        items.innerHTML="Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©";
        totalBox.innerHTML="";
    }else{
        let total=0;
        items.innerHTML=cart.map((c,i)=>{
            total+=parseFloat(c.price);
            return `<div class="prod-item">${c.name} - ${c.price}
            <button onclick="removeCart(${i})" class="delete">X</button></div>`;
        }).join("");
        totalBox.innerHTML="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: "+total;
    }
    modal.classList.add("active");
}

function removeCart(i){
    cart.splice(i,1);
    saveCart();
    openCart();
}

function sendOrder(){
    if(cart.length===0)return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
    let msg="ğŸ“¦ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:%0A";
    cart.forEach(c=>{
        msg+=`- ${c.name} (${c.price})%0A`;
    });
    fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${msg}`);
    cart=[];
    saveCart();
    closeModals();
    alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
}

function openWallet(){
    document.getElementById("walletBalance").innerText="Ø§Ù„Ø±ØµÙŠØ¯: "+wallet;
    document.getElementById("walletModal").classList.add("active");
}

function chargeWallet(){
    let amount=parseFloat(document.getElementById("chargeAmount").value);
    if(!amount)return;
    wallet+=amount;
    saveWallet();
    openWallet();
}

function openAdmin(){
    document.getElementById("adminModal").classList.add("active");
}

function addProduct(){
    const pass=document.getElementById("adminPass").value;
    if(pass!=="1234") return alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø·");
    const name=document.getElementById("prodName").value;
    const price=document.getElementById("prodPrice").value;
    if(!name||!price)return;
    database.push({name,price});
    saveDB();
    renderProducts();
    alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©");
}

function deleteProduct(i){
    database.splice(i,1);
    saveDB();
    renderProducts();
}

function closeModals(){
    document.querySelectorAll(".modal").forEach(m=>m.classList.remove("active"));
}

renderProducts();

</script>

</body>
</html>
