<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reem Store | ريم ستور</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #0b1120; color: white; margin: 0; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(6, 182, 212, 0.1); }
        
        /* تصحيح شكل كروت المنتجات */
        .product-card {
            background: #1e293b;
            border-radius: 24px;
            padding: 12px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: 0.3s;
        }
        .product-card img {
            width: 100%;
            height: 160px;
            object-fit: cover; /* يضمن عدم تمدد الصورة */
            border-radius: 18px;
            background-color: #0f172a; /* لون خلفية في حال لم تظهر الصورة */
        }

        /* شريط الأقسام */
        .category-btn {
            padding: 10px 25px;
            background: #1e293b;
            border-radius: 15px;
            white-space: nowrap;
            cursor: pointer;
            border: 1px solid transparent;
            transition: 0.3s;
        }
        .category-btn.active { background: #06b6d4; color: #0b1120; font-weight: bold; }

        .ticker-wrap { background: #06b6d4; padding: 8px 0; overflow: hidden; }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 20s linear infinite; font-weight: bold; color: #0b1120; }
        @keyframes ticker { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
    </style>
</head>
<body>

    <div class="ticker-wrap">
        <div class="ticker">
             ⭐ أهلاً بكم في ريم ستور - عروض خاصة على شدات ببجي وأرقام الواتساب واشتراكات التيليجرام ⭐
        </div>
    </div>

    <nav class="p-5 flex justify-between items-center sticky top-0 z-[100] glass">
        <div onclick="location.reload()" class="text-2xl font-bold flex items-center gap-2">
            <span class="text-cyan-400">REEM</span> STORE
        </div>
        <div onclick="toggleCart()" class="relative bg-slate-800 p-3 rounded-2xl cursor-pointer">
            <i class="fa-solid fa-cart-shopping text-cyan-400"></i>
            <span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-[10px] w-5 h-5 rounded-full flex items-center justify-center">0</span>
        </div>
    </nav>

    <div class="flex gap-3 overflow-x-auto p-4 no-scrollbar">
        <div class="category-btn active" onclick="render('all')">الكل</div>
        <div class="category-btn" onclick="render('apps')">تطبيقات</div>
        <div class="category-btn" onclick="render('nums')">أرقام</div>
        <div class="category-btn" onclick="render('games')">ألعاب</div>
        <div class="category-btn" onclick="render('tele')">تيليجرام</div>
        <div class="category-btn" onclick="render('social')">سوشل ميديا</div>
    </div>

    <main class="p-4">
        <div id="products-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
            </div>
    </main>

    <footer class="mt-10 p-10 border-t border-white/5 text-center text-gray-500 text-sm">
        <div class="flex justify-center gap-6 mb-4 text-xl">
            <i class="fa-brands fa-whatsapp hover:text-green-500 cursor-pointer"></i>
            <i class="fa-brands fa-telegram hover:text-blue-400 cursor-pointer"></i>
            <i class="fa-brands fa-facebook hover:text-blue-600 cursor-pointer"></i>
        </div>
        <p>© 2026 Reem Store. جميع الحقوق محفوظة.</p>
        <div class="flex justify-center gap-4 mt-2">
            <a href="#" class="hover:underline">سياسة الخصوصية</a>
            <a href="#" class="hover:underline">شروط الاستخدام</a>
        </div>
    </footer>

    <div id="cart-drawer" class="fixed inset-y-0 left-0 w-full md:w-96 bg-[#0b1120] z-[200] transform -translate-x-full transition-transform duration-500 p-8 shadow-2xl">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-2xl font-bold text-cyan-400">سلتك</h2>
            <button onclick="toggleCart()" class="text-3xl">&times;</button>
        </div>
        <div id="cart-items" class="space-y-4 mb-8 max-h-[60vh] overflow-y-auto"></div>
        <div class="border-t border-white/10 pt-4">
            <p class="text-xl font-bold mb-4">الإجمالي: <span id="total-price">0</span> $</p>
            <button onclick="checkout()" class="w-full bg-cyan-500 text-black py-4 rounded-2xl font-bold">إتمام الطلب عبر واتساب</button>
        </div>
    </div>

    <script>
        // مصفوفة المنتجات (تأكدي من وضع روابط صور صحيحة تنتهي بـ .jpg أو .png)
        let products = JSON.parse(localStorage.getItem('reem_vfinal')) || [];
        let cart = [];

        function render(filter = 'all') {
            const grid = document.getElementById('products-grid');
            const filtered = filter === 'all' ? products : products.filter(x => x.cat === filter);
            
            // تحديث حالة الأزرار
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText.includes(filter) || (filter === 'all' && btn.innerText === 'الكل')) btn.classList.add('active');
            });

            if (filtered.length === 0) {
                grid.innerHTML = `<div class="col-span-full text-center py-10 text-gray-500">لا توجد منتجات في هذا القسم حالياً..</div>`;
                return;
            }

            grid.innerHTML = filtered.map(p => `
                <div class="product-card">
                    <img src="${p.img || 'https://via.placeholder.com/300x200/1e293b/06b6d4?text=Reem+Store'}" 
                         onerror="this.src='https://via.placeholder.com/300x200/1e293b/06b6d4?text=Image+Error'">
                    <h4 class="font-bold text-sm my-3 h-10 overflow-hidden">${p.name}</h4>
                    <div class="flex justify-between items-center">
                        <span class="text-cyan-400 font-bold">${p.price} $</span>
                        <button onclick="addToCart('${p.name}', ${p.price})" class="bg-cyan-500 text-black w-8 h-8 rounded-lg flex items-center justify-center hover:scale-110 transition">
                            <i class="fa-solid fa-plus text-xs"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(n, p) {
            cart.push({n, p});
            document.getElementById('cart-count').innerText = cart.length;
            updateCartUI();
            // تنبيه بسيط بدل الـ alert المزعج
            const btn = event.currentTarget;
            btn.innerHTML = '<i class="fa-solid fa-check text-xs"></i>';
            setTimeout(() => { btn.innerHTML = '<i class="fa-solid fa-plus text-xs"></i>'; }, 1000);
        }

        function updateCartUI() {
            const list = document.getElementById('cart-items');
            list.innerHTML = cart.map((item, index) => `
                <div class="flex justify-between items-center bg-slate-800 p-4 rounded-xl">
                    <span>${item.n}</span>
                    <div class="flex items-center gap-4">
                        <span class="text-cyan-400 font-bold">${item.p} $</span>
                        <button onclick="removeFromCart(${index})" class="text-red-500"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>
            `).join('');
            document.getElementById('total-price').innerText = cart.reduce((sum, item) => sum + item.p, 0).toFixed(2);
        }

        function removeFromCart(i) {
            cart.splice(i, 1);
            document.getElementById('cart-count').innerText = cart.length;
            updateCartUI();
        }

        function toggleCart() {
            document.getElementById('cart-drawer').classList.toggle('-translate-x-full');
        }

        function checkout() {
            if(cart.length === 0) return;
            let msg = `طلب جديد من ريم ستور:%0A` + cart.map(x => `- ${x.n} (${x.p}$)`).join('%0A') + `%0A%0Aالإجمالي: ${document.getElementById('total-price').innerText}$`;
            window.open(`https://wa.me/963968493135?text=${msg}`);
        }

        render();
    </script>
</body>
</html>
