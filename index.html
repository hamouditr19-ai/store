<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reem Store PRO</title>

<style>
body{margin:0;font-family:Arial;background:#0f172a;color:white}
header{padding:15px;text-align:center;background:#1e293b;font-size:20px}
.products{padding:15px;margin-bottom:70px}
.prod-item{background:#1e293b;padding:15px;margin-bottom:10px;border-radius:10px;display:flex;justify-content:space-between;align-items:center}
button{border:none;padding:8px 12px;border-radius:6px;cursor:pointer}
.buy{background:#22c55e;color:white}
.delete{background:red;color:white}
.bottom-bar{position:fixed;bottom:0;left:0;right:0;background:#1e293b;display:flex;justify-content:space-around;padding:10px}
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center}
.modal.active{display:flex}
.sheet{background:#1e293b;padding:20px;width:90%;max-width:400px;border-radius:15px}
input{width:100%;padding:8px;margin:5px 0;border-radius:5px;border:none}
.small{font-size:13px;opacity:.6}
</style>
</head>
<body>

<header>Reem Store PRO ğŸš€</header>

<div class="products" id="productList"></div>

<div class="bottom-bar">
<button onclick="openWallet()">ğŸ’°</button>
<button onclick="openOrders()">ğŸ“¦</button>
<button onclick="openAdmin()">âš™ï¸</button>
</div>

<!-- LOGIN -->
<div id="loginModal" class="modal">
<div class="sheet">
<h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h3>
<input id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
<button onclick="login()" class="buy">Ø¯Ø®ÙˆÙ„</button>
</div>
</div>

<!-- WALLET -->
<div id="walletModal" class="modal" onclick="closeModals()">
<div class="sheet" onclick="event.stopPropagation()">
<h3>Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
<h4 id="walletBalance"></h4>
<input id="chargeAmount" placeholder="Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø­Ù†">
<button onclick="chargeWallet()" class="buy">Ø´Ø­Ù†</button>
</div>
</div>

<!-- ORDERS -->
<div id="ordersModal" class="modal" onclick="closeModals()">
<div class="sheet" onclick="event.stopPropagation()">
<h3>Ø·Ù„Ø¨Ø§ØªÙŠ</h3>
<div id="ordersList"></div>
</div>
</div>

<!-- ADMIN -->
<div id="adminModal" class="modal" onclick="closeModals()">
<div class="sheet" onclick="event.stopPropagation()">
<h3>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h3>
<input id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<button onclick="adminLogin()" class="buy">Ø¯Ø®ÙˆÙ„</button>
<div id="adminPanel" style="display:none">
<input id="prodName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input id="prodPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<button onclick="addProduct()" class="buy">Ø¥Ø¶Ø§ÙØ©</button>
</div>
</div>
</div>

<script>

const ADMIN_PASSWORD="1234";

let user=localStorage.getItem("user");
let database=JSON.parse(localStorage.getItem("db"))||[];
let wallet=parseFloat(localStorage.getItem("wallet"))||0;
let orders=JSON.parse(localStorage.getItem("orders"))||[];
let isAdmin=false;

function save(){
localStorage.setItem("db",JSON.stringify(database));
localStorage.setItem("wallet",wallet);
localStorage.setItem("orders",JSON.stringify(orders));
}

if(!user){
document.getElementById("loginModal").classList.add("active");
}

function login(){
let name=document.getElementById("username").value;
if(!name)return;
user=name;
localStorage.setItem("user",name);
closeModals();
}

function renderProducts(){
const list=document.getElementById("productList");
if(database.length===0){
list.innerHTML="<p class='small'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>";
return;
}
list.innerHTML=database.map((p,i)=>`
<div class="prod-item">
<span>${p.name} - ${p.price}</span>
<div>
<button class="buy" onclick="buy(${i})">Ø´Ø±Ø§Ø¡</button>
${isAdmin?`<button class="delete" onclick="deleteProduct(${i})">X</button>`:""}
</div>
</div>`).join("");
}

function buy(i){
let price=parseFloat(database[i].price);
if(wallet<price) return alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ");
wallet-=price;
orders.push(database[i]);
save();
alert("ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­");
renderProducts();
}

function openWallet(){
document.getElementById("walletBalance").innerText="Ø§Ù„Ø±ØµÙŠØ¯: "+wallet;
document.getElementById("walletModal").classList.add("active");
}

function chargeWallet(){
let amount=parseFloat(document.getElementById("chargeAmount").value);
if(!amount)return;
wallet+=amount;
save();
openWallet();
}

function openOrders(){
const list=document.getElementById("ordersList");
if(orders.length===0){
list.innerHTML="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª";
}else{
list.innerHTML=orders.map(o=>`<div class="prod-item">${o.name} - ${o.price}</div>`).join("");
}
document.getElementById("ordersModal").classList.add("active");
}

function openAdmin(){
document.getElementById("adminModal").classList.add("active");
}

function adminLogin(){
let pass=document.getElementById("adminPass").value;
if(pass===ADMIN_PASSWORD){
isAdmin=true;
document.getElementById("adminPanel").style.display="block";
renderProducts();
}else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø·");
}

function addProduct(){
let name=document.getElementById("prodName").value;
let price=document.getElementById("prodPrice").value;
if(!name||!price)return;
database.push({name,price});
save();
renderProducts();
}

function deleteProduct(i){
database.splice(i,1);
save();
renderProducts();
}

function closeModals(){
document.querySelectorAll(".modal").forEach(m=>m.classList.remove("active"));
}

renderProducts();

</script>
</body>
</html>
