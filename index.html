<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Reem Store Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap');
        body { font-family: 'Cairo', sans-serif; background: #0f172a; color: white; -webkit-tap-highlight-color: transparent; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .active-tab { background: linear-gradient(90deg, #3b82f6, #8b5cf6); box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); border: none; }
        .product-card:active { transform: scale(0.95); }
        input[type="file"]::file-selector-button { background: #3b82f6; border: none; color: white; padding: 5px 15px; border-radius: 8px; cursor: pointer; }
    </style>
</head>
<body class="pb-24 select-none">

    <div class="p-4 flex justify-between items-center glass sticky top-0 z-50">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-blue-500 to-purple-600 flex items-center justify-center font-bold">R</div>
            <span class="font-bold">Reem Store ğŸ’</span>
        </div>
        <div class="bg-white/10 px-4 py-1 rounded-full text-sm border border-white/10">
            Ø±ØµÙŠØ¯Ùƒ: <span class="text-green-400 font-bold">0.00$</span>
        </div>
    </div>

    <div class="relative h-44 mx-4 mt-4 rounded-3xl overflow-hidden shadow-2xl">
        <div class="slides h-full relative">
            <div class="slide absolute inset-0 opacity-1 transition-opacity duration-1000">
                <img src="https://img.freepik.com/free-vector/gaming-store-youtube-header_23-2150111162.jpg" class="w-full h-full object-cover">
            </div>
            <div class="slide absolute inset-0 opacity-0 transition-opacity duration-1000">
                <img src="https://img.freepik.com/free-vector/social-media-concept-illustration_114360-1510.jpg" class="w-full h-full object-cover">
            </div>
        </div>
    </div>

    <div class="flex overflow-x-auto gap-3 p-4 no-scrollbar">
        <button onclick="filterCat('all')" class="tab-btn active-tab whitespace-nowrap px-6 py-2 rounded-xl text-sm font-bold border border-white/10">Ø§Ù„ÙƒÙ„ âœ¨</button>
        <button onclick="filterCat('games')" class="tab-btn whitespace-nowrap px-6 py-2 rounded-xl text-sm font-bold border border-white/10">Ø£Ù„Ø¹Ø§Ø¨ ğŸ®</button>
        <button onclick="filterCat('social')" class="tab-btn whitespace-nowrap px-6 py-2 rounded-xl text-sm font-bold border border-white/10">Ø³ÙˆØ´Ø§Ù„ ğŸš€</button>
        <button onclick="filterCat('subs')" class="tab-btn whitespace-nowrap px-6 py-2 rounded-xl text-sm font-bold border border-white/10">Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ğŸ’</button>
    </div>

    <div id="products-container" class="grid grid-cols-2 gap-4 px-4">
        </div>

    <div id="orderModal" class="fixed inset-0 bg-black/90 hidden z-[100] p-4 flex items-center justify-center">
        <div class="glass w-full max-w-sm rounded-[35px] p-6 border-white/20">
            <div class="flex justify-between items-center mb-6">
                <h3 id="mTitle" class="font-extrabold text-xl">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</h3>
                <button onclick="closeModal()" class="text-gray-400"><i class="fas fa-times-circle text-2xl"></i></button>
            </div>
            
            <form id="proOrderForm" class="space-y-4">
                <input type="hidden" id="mService">
                <input type="text" id="mName" placeholder="Ø§Ù„Ø§Ø³Ù… / Ø§Ù„Ù…Ø¹Ø±Ù" required class="w-full bg-white/5 p-4 rounded-2xl outline-none focus:ring-2 ring-blue-500">
                <textarea id="mDetails" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ù‡Ù†Ø§..." required class="w-full bg-white/5 p-4 rounded-2xl outline-none h-24"></textarea>
                
                <div class="bg-white/5 p-4 rounded-2xl border border-dashed border-white/20">
                    <label class="block text-xs text-gray-400 mb-2">Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="file" id="mFile" accept="image/*" class="text-xs w-full">
                </div>

                <button type="submit" id="submitBtn" class="w-full active-tab py-4 rounded-2xl font-black text-lg">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ ğŸš€</button>
            </form>
        </div>
    </div>

    <div class="fixed bottom-6 left-4 right-4 h-16 glass rounded-2xl flex justify-around items-center px-2 z-50">
        <i class="fas fa-home text-blue-500 text-xl"></i>
        <i class="fas fa-search text-gray-400 text-xl"></i>
        <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center -mt-10 shadow-lg shadow-blue-500/50"><i class="fas fa-plus"></i></div>
        <i class="fas fa-shopping-cart text-gray-400 text-xl"></i>
        <i class="fas fa-user text-gray-400 text-xl"></i>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // Ù„ÙØªØ­ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙƒØ§Ù…Ù„Ø©

        const BOT_TOKEN = "8222212068:AAH935nM61iSGrGGcXo_H2I6mB13Ws2QE74";
        const CHAT_ID = "7741275208";

        const products = [
            { id:1, name: "Ø´Ø­Ù† Ø´Ø¯Ø§Øª Ø¨Ø¨Ø¬ÙŠ", icon: "ğŸ”«", cat: "games" },
            { id:2, name: "Ù…ØªØ§Ø¨Ø¹ÙŠÙ† Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…", icon: "ğŸ“¸", cat: "social" },
            { id:3, name: "ÙŠÙˆØªÙŠÙˆØ¨ Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", icon: "ğŸ“º", cat: "subs" },
            { id:4, name: "ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…", icon: "ğŸ’", cat: "subs" },
            { id:5, name: "Ù„Ø§ÙŠÙƒØ§Øª ØªÙŠÙƒ ØªÙˆÙƒ", icon: "ğŸµ", cat: "social" },
            { id:6, name: "Ø¨Ø·Ø§Ù‚Ø§Øª Ø¬ÙˆØ¬Ù„ Ø¨Ù„Ø§ÙŠ", icon: "ğŸƒ", cat: "games" }
        ];

        function renderProducts(filter = 'all') {
            const container = document.getElementById('products-container');
            container.innerHTML = '';
            products.forEach(p => {
                if(filter === 'all' || p.cat === filter) {
                    container.innerHTML += `
                        <div onclick="openModal('${p.name}')" class="product-card glass p-6 rounded-[2.5rem] text-center flex flex-col items-center gap-3">
                            <span class="text-4xl">${p.icon}</span>
                            <span class="text-sm font-bold">${p.name}</span>
                            <span class="text-[10px] bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full">Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</span>
                        </div>
                    `;
                }
            });
        }
        renderProducts();

        function filterCat(cat) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active-tab'));
            event.target.classList.add('active-tab');
            renderProducts(cat);
            tg.HapticFeedback.impactOccurred('medium');
        }

        function openModal(name) {
            document.getElementById('mTitle').innerText = name;
            document.getElementById('mService').value = name;
            document.getElementById('orderModal').style.display = 'flex';
            tg.HapticFeedback.impactOccurred('light');
        }

        function closeModal() {
            document.getElementById('orderModal').style.display = 'none';
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØµÙˆØ±Ø©
        document.getElementById('proOrderForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            btn.disabled = true;
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";

            const text = `
ğŸ†• *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ø·ÙˆÙ‘Ø±*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ›  Ø§Ù„Ø®Ø¯Ù…Ø©: *${document.getElementById('mService').value}*
ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${document.getElementById('mName').value}
ğŸ“ Ø§Ù„ØªÙØ§ØµÙŠÙ„: ${document.getElementById('mDetails').value}
â° Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date().toLocaleString('ar-EG')}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;

            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: 'Markdown' })
                });

                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª
                const fileInput = document.getElementById('mFile');
                if(fileInput.files.length > 0) {
                    const formData = new FormData();
                    formData.append('chat_id', CHAT_ID);
                    formData.append('photo', fileInput.files[0]);
                    formData.append('caption', `ğŸ“¸ Ù…Ø±ÙÙ‚ Ù„Ù„Ø·Ù„Ø¨ Ù…Ù†: ${document.getElementById('mName').value}`);
                    
                    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                        method: 'POST',
                        body: formData
                    });
                }

                tg.showPopup({
                    title: 'ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!',
                    message: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ù„Ø¨ÙˆØª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­.',
                    buttons: [{type: 'ok'}]
                });
                
                closeModal();
                tg.close(); // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù€ WebApp ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­

            } catch (err) {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
            }
        };

        // Slider Logic
        let sIdx = 0;
        setInterval(() => {
            const ss = document.querySelectorAll('.slide');
            ss[sIdx].style.opacity = 0;
            sIdx = (sIdx + 1) % ss.length;
            ss[sIdx].style.opacity = 1;
        }, 4000);
    </script>
</body>
</html>
