<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reem Store PRO</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<style>
body{margin:0;font-family:'Cairo';background:#0f172a;color:white}
.container{padding:20px}
input,button{padding:10px;border-radius:8px;border:none;margin:5px 0;width:100%}
button{background:linear-gradient(45deg,#00c6ff,#0072ff);color:white}
.card{background:#1e293b;padding:15px;border-radius:12px;margin-bottom:10px}
.hidden{display:none}
.admin{background:#111827;padding:15px}
</style>
</head>

<body>

<div class="container">

<h2>تسجيل الدخول</h2>
<div id="authBox">
<input type="email" id="email" placeholder="الإيميل">
<input type="password" id="password" placeholder="كلمة المرور">
<button onclick="login()">دخول</button>
<button onclick="register()">إنشاء حساب</button>
</div>

<div id="store" class="hidden">
<h2>المتجر</h2>
<div id="products"></div>
<button onclick="logout()">تسجيل خروج</button>
</div>

<div id="adminPanel" class="hidden admin">
<h2>لوحة تحكم الأدمن</h2>
<div id="ordersList"></div>
</div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_AUTH_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

window.login = async function(){
const email=emailInput.value;
const pass=password.value;
await signInWithEmailAndPassword(auth,email,pass);
}

window.register = async function(){
const email=emailInput.value;
const pass=password.value;
await createUserWithEmailAndPassword(auth,email,pass);
}

window.logout = function(){signOut(auth)}

onAuthStateChanged(auth,user=>{
if(user){
document.getElementById("authBox").classList.add("hidden");
document.getElementById("store").classList.remove("hidden");

if(user.email==="admin@email.com"){
document.getElementById("adminPanel").classList.remove("hidden");
loadOrders();
}

}else{
document.getElementById("authBox").classList.remove("hidden");
document.getElementById("store").classList.add("hidden");
}
});

const products=[{name:"شحن ببجي",price:5},{name:"اشتراك نتفلكس",price:4}];
const productsDiv=document.getElementById("products");

products.forEach(p=>{
productsDiv.innerHTML+=`
<div class="card">
${p.name} - ${p.price}$
<button onclick="order('${p.name}',${p.price})">طلب</button>
</div>`;
});

window.order=async function(name,price){
await addDoc(collection(db,"orders"),{
name,price,time:new Date().toLocaleString()
});
alert("تم إرسال الطلب");
}

async function loadOrders(){
const querySnapshot=await getDocs(collection(db,"orders"));
const list=document.getElementById("ordersList");
list.innerHTML="";
querySnapshot.forEach(docSnap=>{
list.innerHTML+=`
<div class="card">
${docSnap.data().name} - ${docSnap.data().price}$
<button onclick="deleteOrder('${docSnap.id}')">حذف</button>
</div>`;
});
}

window.deleteOrder=async function(id){
await deleteDoc(doc(db,"orders",id));
loadOrders();
}

</script>

</body>
</html>
